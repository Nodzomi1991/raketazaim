<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Игра Telegram</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {
margin: 0;
font-family: sans-serif;
display: flex;
flex-direction: column;
justify-content: flex-start;
align-items: center;
height: 100vh;
background: #f0f0f0;
}
#game-container {
width: 100%;
max-width: 600px;
padding: 20px;
text-align: center;
background: white;
box-shadow: 0 0 10px rgba(0,0,0,0.2);
margin-top: 20px;
border-radius: 10px;
}
table {
width: 100%;
border-collapse: collapse;
margin-top: 20px;
}
th, td {
padding: 8px;
border: 1px solid #ccc;
}
th {
background: #eee;
}
button {
margin-top: 10px;
padding: 10px 20px;
font-size: 16px;
}
</style>
</head>
<body>
<div id="game-container">
<h1>Игра Telegram</h1>
<p>Нажми кнопку, чтобы сыграть!</p>
<button id="play-btn">Сыграть</button>
<table id="leaderboard">
<thead>
<tr>
<th>Игрок</th>
<th>Очки</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>

<script>
if (typeof window.Telegram === "undefined" || !window.Telegram.WebApp) {
document.body.innerHTML = "<h2>Эта игра работает только внутри мини-приложения Telegram.</h2>";
throw new Error("Не в Telegram WebApp");
}

const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

// Пример данных игроков (можно сохранять через backend или localStorage)
let leaderboard = [
{ name: "Игрок 1", score: 0 },
{ name: "Игрок 2", score: 0 },
{ name: "Игрок 3", score: 0 },
];

// Функция обновления таблицы
function renderLeaderboard() {
const tbody = document.querySelector("#leaderboard tbody");
tbody.innerHTML = "";
leaderboard.sort((a,b) => b.score - a.score);
leaderboard.forEach(player => {
const tr = document.createElement("tr");
tr.innerHTML = `<td>${player.name}</td><td>${player.score}</td>`;
tbody.appendChild(tr);
});
}

// Инициализация
renderLeaderboard();

// Логика игры (пример)
document.getElementById("play-btn").addEventListener("click", () => {
// Выбираем случайного игрока
const randomIndex = Math.floor(Math.random() * leaderboard.length);
const points = Math.floor(Math.random() * 10) + 1; // случайные очки
leaderboard[randomIndex].score += points;

renderLeaderboard();
});
</script>
</body>
</html>
